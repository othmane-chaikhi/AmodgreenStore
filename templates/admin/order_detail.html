{% extends 'base.html' %}
{% block title %}D√©tail commande #{{ order.id }}{% endblock %}

{% block content %}
<div class="container mx-auto p-6">
    <h1 class="text-2xl font-bold mb-4">D√©tail de la commande #{{ order.id }}</h1>

    <!-- üßæ Informations client -->
    <div class="bg-gray-100 p-4 rounded shadow mb-6">
        <h2 class="text-xl font-semibold mb-2">Informations du client</h2>
        <p><strong>Nom complet :</strong> {{ order.full_name }}</p>
        <p><strong>Num√©ro de t√©l√©phone :</strong> {{ order.phone }}</p>
        <p><strong>Ville :</strong> {{ order.city }}</p>
        <p><strong>Adresse :</strong> {{ order.address }}</p>
        {% if order.notes %}
            <p><strong>Remarques :</strong> {{ order.notes }}</p>
        {% endif %}
    </div>

    <!-- üì¶ D√©tails produits -->
    <div class="bg-white p-4 rounded shadow mb-6">
        <h2 class="text-xl font-semibold mb-2">Produits command√©s</h2>
        <ul class="list-disc ml-6">
            {% for item in order.items.all %}
                <li>{{ item.product.name }} - {{ item.quantity }} x {{ item.price }} MAD</li>
            {% endfor %}
        </ul>
        <p class="mt-4 font-semibold">üí∞ Prix total : {{ order.total_price }} MAD</p>
    </div>

    <!-- üöö Statut -->
    <p class="mb-4"><strong>Statut actuel :</strong> 
        <span class="px-2 py-1 rounded bg-gray-200 text-gray-800">{{ order.get_status_display }}</span>
    </p>

    <!-- ‚úÖ Actions -->
    <form method="post" class="mt-6 flex gap-4">
        {% csrf_token %}
        <button name="action" value="confirm" class="bg-green-600 text-white px-4 py-2 rounded">
            ‚úÖ Confirmer la commande
        </button>
        <button name="action" value="cancel" class="bg-red-600 text-white px-4 py-2 rounded">
            ‚ùå Annuler la commande
        </button>
    </form>

    <a href="{% url 'admin_dashboard' %}" class="inline-block mt-6 text-blue-600 hover:underline">‚Üê Retour au tableau de bord</a>
</div>
{% endblock %}
